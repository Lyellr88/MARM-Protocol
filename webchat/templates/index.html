<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MARM Systems - Memory Accurate Response Mode</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

  <header>
    <h1>MARM Chatbot</h1>
    <button id="helpBtn">Help & MARM Guide</button>
  </header>

  <main>
    <section id="chatbox">
      <div id="chat-log"></div>
      <form id="chat-form">
        <input 
          type="text" 
          id="user-input" 
          placeholder="Type a message or command..." 
          autocomplete="off"
          autofocus
        />
        <button type="submit">Send</button>
      </form>
    </section>
  </main>

  <div id="help-modal" class="modal hidden">
    <div class="modal-content">
      <span id="close-help" class="close">&times;</span>
      <h2>MARM Protocol Help</h2>
      <p>
        <strong>Memory Accurate Response Mode (MARM)</strong><br>
        A protocol for maintaining conversation context and providing transparent, accurate AI responses.
      </p>
        <strong>Quick Commands (v1.4):</strong>
      </p>
      <ul>
        <li><code>/start marm</code> - Activates MARM for the session.</li>
        <li><code>/refresh marm</code> - Reaffirms protocol adherence mid-session.</li>
        <li><code>/log</code> - Use <code>session:</code> to name a session or <code>entry</code> to log a milestone.</li>
        <li><code>/compile</code> - Generates a summary of your session logs.</li>
        <li><code>/notebook</code> - Manages your personal knowledge library.</li>
        <li><code>/contextual reply</code> - Forces an accuracy-first response.</li>
        <li><code>/show reasoning</code> - Reveals the logic behind the last response.</li>
      </ul>
      <p>
        <strong>Documentation:</strong><br>
        <a href="data/handbook.md" target="_blank">üìò Full Handbook</a><br>
        <a href="data/faq.md" target="_blank">‚ùì FAQ</a><br>
        <a href="data/description.md" target="_blank">üìÑ Project Description</a>
      </p>
    </div>
  </div>

  <button id="token-counter-btn" title="Token Counter">TC</button>
  <button id="darkModeToggle" title="Toggle Dark Mode">üåô</button>

  <script type="module">
    // Test if modules are loading
    console.log('Loading modules...');
    import('./src/chatbot.js').then(() => console.log('Chatbot loaded')).catch(e => console.error('Chatbot error:', e));
  </script>
</body>
</html>
